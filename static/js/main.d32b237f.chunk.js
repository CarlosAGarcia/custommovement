(this.webpackJsonpcustommovement=this.webpackJsonpcustommovement||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var o=n(8),i=n.n(o),r=n(13),a=n.n(r),s=(n(18),n(19),n(10)),c=n(4),d=n(0),u=n(5),m=n(1),l=n(2),h=new c.c(0,0,0,"YXZ"),w=new c.n,p={type:"change"},f={type:"lock"},b={type:"unlock"},v=Math.PI/2,y=function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(e,o){var i;Object(d.a)(this,n),i=t.call(this),void 0===o&&(console.warn('THREE.PointerLockControls: The second parameter "domElement" is now mandatory.'),o=document.body),i.domElement=o,i.isLocked=!1,i.minPolarAngle=0,i.maxPolarAngle=Math.PI;var r=Object(u.a)(i);function a(t){if(!1!==r.isLocked){var n=t.movementX||t.mozMovementX||t.webkitMovementX||0,o=t.movementY||t.mozMovementY||t.webkitMovementY||0;h.setFromQuaternion(e.quaternion),h.y-=.002*n,h.x-=.002*o,h.x=Math.max(v-r.maxPolarAngle,Math.min(v-r.minPolarAngle,h.x)),e.quaternion.setFromEuler(h),r.dispatchEvent(p)}}function s(){r.domElement.ownerDocument.pointerLockElement===r.domElement?(r.dispatchEvent(f),r.isLocked=!0):(r.dispatchEvent(b),r.isLocked=!1)}function m(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}return i.connect=function(){r.domElement.ownerDocument.addEventListener("mousemove",a),r.domElement.ownerDocument.addEventListener("pointerlockchange",s),r.domElement.ownerDocument.addEventListener("pointerlockerror",m)},i.disconnect=function(){r.domElement.ownerDocument.removeEventListener("mousemove",a),r.domElement.ownerDocument.removeEventListener("pointerlockchange",s),r.domElement.ownerDocument.removeEventListener("pointerlockerror",m)},i.dispose=function(){this.disconnect()},i.getObject=function(){return e},i.getDirection=function(){var t=new c.n(0,0,-1);return function(n){return n.copy(t).applyQuaternion(e.quaternion)}}(),i.moveForward=function(t){w.setFromMatrixColumn(e.matrix,0),w.crossVectors(e.up,w),e.position.addScaledVector(w,t)},i.moveRight=function(t){w.setFromMatrixColumn(e.matrix,0),e.position.addScaledVector(w,t)},i.lock=function(){this.domElement.requestPointerLock()},i.unlock=function(){r.domElement.ownerDocument.exitPointerLock()},i.connect(),i}return n}(c.d),g=n(6);var k=function(){var e,t,n,i,r,a=Object(o.useState)({furthestX:0,furthestY:0,furthestZ:0,interval:0}),d=Object(s.a)(a,2),u=d[0],m=d[1],l=[],h=!1,w=!1,p=!1,f=!1,b=!1,v=!1,k=!1,x=performance.now(),E=new c.n,L=new c.n,M=new c.b;function j(){(e=new c.j(75,window.innerWidth/window.innerHeight,1,1e3)).position.y=10,m({furthestX:e.position.x,furthestY:e.position.y,furthestZ:e.position.z,interval:0}),(t=new c.m).background=new c.b(16777215),t.fog=new c.f(16777215,0,100);var o=new c.g(15658751,7829384,.75);o.position.set(.5,1,.75),t.add(o),i=new y(e,document.body);var a=document.getElementById("blocker"),s=document.getElementById("instructions");s.addEventListener("click",(function(){i.lock()})),i.addEventListener("lock",(function(){s.style.display="none",a.style.display="none"})),i.addEventListener("unlock",(function(){a.style.display="block",s.style.display=""})),t.add(i.getObject());document.addEventListener("keydown",(function(e){switch(e.code){case"ControlLeft":case"ControlRight":h||(h=!0);break;case"ShiftLeft":case"ShiftRight":w||(w=!0);break;case"ArrowUp":case"KeyW":p=!0;break;case"ArrowLeft":case"KeyA":b=!0;break;case"ArrowDown":case"KeyS":f=!0;break;case"ArrowRight":case"KeyD":v=!0;break;case"Space":!0===k&&(E.y+=350),k=!1}})),document.addEventListener("keyup",(function(e){switch(e.code){case"ControlLeft":case"ControlRight":h&&(h=!1);break;case"ShiftLeft":case"ShiftRight":w&&(w=!1);break;case"ArrowUp":case"KeyW":p=!1;break;case"ArrowLeft":case"KeyA":b=!1;break;case"ArrowDown":case"KeyS":f=!1;break;case"ArrowRight":case"KeyD":v=!1}})),r=new c.l(new c.n,new c.n(0,-1,0),0,10),(n=new c.o({antialias:!0})).setPixelRatio(window.devicePixelRatio),n.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(n.domElement),function(n){var o=0,i=0,r=0,a=new c.k(2e3,2e3,100,100);a.attributes.position,(a=a.toNonIndexed()).attributes.position;for(var s=new c.a(20,20,20).toNonIndexed(),d=[],u=0,h=s.attributes.position.count;u<h;u++)M.setHSL(.3*Math.random()+.5,.75,.25*Math.random()+.75),d.push(M.r,M.g,M.b);s.setAttribute("color",new c.e(d,3));for(var w=new c.i({specular:16777215,flatShading:!0,vertexColors:!0}),p=0;p<500;p++){w.color.setHSL(.2*Math.random()+.5,.75,.25*Math.random()+.75);var f=new c.h(s,w);f.position.x=20*Math.floor(20*Math.random()-10)+e.position.x,f.position.y=20*Math.floor(20*Math.random())+10+e.position.y,f.position.z=20*Math.floor(20*Math.random()-10)+e.position.z,Math.abs(o)<Math.abs(f.position.x)&&(o=f.position.x),Math.abs(i)<Math.abs(f.position.y)&&(i=f.position.y),Math.abs(r)<Math.abs(f.position.z)&&(r=f.position.z),f.position.interval=n+1,t.add(f),l.push(f)}m({furthestX:o,furthestY:i,furthestZ:r,interval:n+1})}(0),window.addEventListener("resize",O)}function O(){e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),n.setSize(window.innerWidth,window.innerHeight)}function z(){requestAnimationFrame(z);var o=performance.now();if(!0===i.isLocked){r.ray.origin.copy(i.getObject().position),r.ray.origin.y-=10;var a=r.intersectObjects(l).length>0,s=(o-x)/1e3;E.x-=10*E.x*s,E.z-=10*E.z*s,E.y-=9.8*100*s,L.z=Number(p)-Number(f),L.x=Number(v)-Number(b),L.normalize(),(p||f)&&(E.z-=400*L.z*s),(b||v)&&(E.x-=400*L.x*s),w&&(E.x=1.2*E.x,E.z=1.2*E.z),h&&(w=!1,e.position.y-=5),!0===a&&(E.y=Math.max(0,E.y),k=!0),i.moveRight(-E.x*s),i.moveForward(-E.z*s),i.getObject().position.y+=E.y*s;var c=u.furthestX,d=u.furthestY,m=u.furthestZ,y=u.interval,g=e.position,M=g.x,j=g.y,O=g.z;console.log({x:M,y:j,z:O,furthestX:c,furthestY:d,furthestZ:m,interval:y});Math.abs(c),Math.abs(M),Math.abs(d),Math.abs(j),Math.abs(m),Math.abs(O);i.getObject().position.y<10&&(E.y=0,i.getObject().position.y=h?5:10,k=!0)}x=o,n.render(t,e)}return Object(o.useEffect)((function(){var t=function(){console.log("RESIZING",{w:window.innerWidth,h:window.innerHeight}),e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),n.setSize(window.innerWidth,window.innerHeight)};return j(),z(),window.addEventListener("resize",t,!1),function(){window.removeEventListener("resize",t,!1)}}),[]),Object(g.jsx)("div",{id:"blocker",children:Object(g.jsxs)("div",{id:"instructions",children:[Object(g.jsx)("p",{className:"playText",children:"Click to play"}),Object(g.jsxs)("p",{children:["Move: WASD",Object(g.jsx)("br",{}),"Jump: SPACE",Object(g.jsx)("br",{}),"Look: MOUSE Sprint: HOLD SHIFT Crouch: HOLD CTRL"]})]})})};var x=function(){return Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(k,{})})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,o=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),o(e),i(e),r(e),a(e)}))};a.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(x,{})}),document.getElementById("root")),E()}},[[22,1,2]]]);
//# sourceMappingURL=main.d32b237f.chunk.js.map