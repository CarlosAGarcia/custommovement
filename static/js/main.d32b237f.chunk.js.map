{"version":3,"sources":["controls/PointerLockControls.js","components/walkingZone.js","App.js","reportWebVitals.js","index.js"],"names":["_euler","Euler","_vector","Vector3","_changeEvent","type","_lockEvent","_unlockEvent","_PI_2","Math","PI","PointerLockControls","camera","domElement","undefined","console","warn","document","body","isLocked","minPolarAngle","maxPolarAngle","scope","onMouseMove","event","movementX","mozMovementX","webkitMovementX","movementY","mozMovementY","webkitMovementY","setFromQuaternion","quaternion","y","x","max","min","setFromEuler","dispatchEvent","onPointerlockChange","ownerDocument","pointerLockElement","onPointerlockError","error","connect","addEventListener","disconnect","removeEventListener","dispose","this","getObject","getDirection","direction","v","copy","applyQuaternion","moveForward","distance","setFromMatrixColumn","matrix","crossVectors","up","position","addScaledVector","moveRight","lock","requestPointerLock","unlock","exitPointerLock","EventDispatcher","WalkingZone","scene","renderer","controls","raycaster","useState","furthestX","furthestY","furthestZ","interval","cameraPosSnapshot","setCameraPosSnapshot","objects","crouchToggle","sprintToggle","moveBackward","moveLeft","canJump","prevTime","performance","now","velocity","THREE","color","init","window","innerWidth","innerHeight","z","background","fog","light","set","add","blocker","getElementById","instructions","style","display","code","antialias","setPixelRatio","devicePixelRatio","setSize","appendChild","floorGeometry","attributes","toNonIndexed","boxGeometry","colorsBox","i","l","count","setHSL","random","push","r","g","b","setAttribute","boxMaterial","specular","flatShading","vertexColors","box","floor","abs","addNewItems","onWindowResize","aspect","updateProjectionMatrix","animate","requestAnimationFrame","time","ray","origin","onObject","intersectObjects","length","delta","Number","normalize","log","render","useEffect","handleResize","w","h","id","className","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.d32b237f.chunk.js","sourcesContent":["import {\r\n\tEuler,\r\n\tEventDispatcher,\r\n\tVector3\r\n} from '../../node_modules/three/build/three.module' //'../../../build/three.module.js';\r\n\r\nconst _euler = new Euler( 0, 0, 0, 'YXZ' );\r\nconst _vector = new Vector3();\r\n\r\nconst _changeEvent = { type: 'change' };\r\nconst _lockEvent = { type: 'lock' };\r\nconst _unlockEvent = { type: 'unlock' };\r\n\r\nconst _PI_2 = Math.PI / 2;\r\n\r\nclass PointerLockControls extends EventDispatcher {\r\n\r\n\tconstructor( camera, domElement ) {\r\n\r\n\t\tsuper();\r\n\r\n\t\tif ( domElement === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.PointerLockControls: The second parameter \"domElement\" is now mandatory.' );\r\n\t\t\tdomElement = document.body;\r\n\r\n\t\t}\r\n\r\n\t\tthis.domElement = domElement;\r\n\t\tthis.isLocked = false;\r\n\r\n\t\t// Set to constrain the pitch of the camera\r\n\t\t// Range is 0 to Math.PI radians\r\n\t\tthis.minPolarAngle = 0; // radians\r\n\t\tthis.maxPolarAngle = Math.PI; // radians\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tfunction onMouseMove( event ) {\r\n\r\n\t\t\tif ( scope.isLocked === false ) return;\r\n\r\n\t\t\tconst movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;\r\n\t\t\tconst movementY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;\r\n\r\n\t\t\t_euler.setFromQuaternion( camera.quaternion );\r\n\r\n\t\t\t_euler.y -= movementX * 0.002;\r\n\t\t\t_euler.x -= movementY * 0.002;\r\n\r\n\t\t\t_euler.x = Math.max( _PI_2 - scope.maxPolarAngle, Math.min( _PI_2 - scope.minPolarAngle, _euler.x ) );\r\n\r\n\t\t\tcamera.quaternion.setFromEuler( _euler );\r\n\r\n\t\t\tscope.dispatchEvent( _changeEvent );\r\n\r\n\t\t}\r\n\r\n\t\tfunction onPointerlockChange() {\r\n\r\n\t\t\tif ( scope.domElement.ownerDocument.pointerLockElement === scope.domElement ) {\r\n\r\n\t\t\t\tscope.dispatchEvent( _lockEvent );\r\n\r\n\t\t\t\tscope.isLocked = true;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tscope.dispatchEvent( _unlockEvent );\r\n\r\n\t\t\t\tscope.isLocked = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction onPointerlockError() {\r\n\r\n\t\t\tconsole.error( 'THREE.PointerLockControls: Unable to use Pointer Lock API' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.connect = function () {\r\n\r\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'mousemove', onMouseMove );\r\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointerlockchange', onPointerlockChange );\r\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointerlockerror', onPointerlockError );\r\n\r\n\t\t};\r\n\r\n\t\tthis.disconnect = function () {\r\n\r\n\t\t\tscope.domElement.ownerDocument.removeEventListener( 'mousemove', onMouseMove );\r\n\t\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerlockchange', onPointerlockChange );\r\n\t\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerlockerror', onPointerlockError );\r\n\r\n\t\t};\r\n\r\n\t\tthis.dispose = function () {\r\n\r\n\t\t\tthis.disconnect();\r\n\r\n\t\t};\r\n\r\n\t\tthis.getObject = function () { // retaining this method for backward compatibility\r\n\r\n\t\t\treturn camera;\r\n\r\n\t\t};\r\n\r\n\t\tthis.getDirection = function () {\r\n\r\n\t\t\tconst direction = new Vector3( 0, 0, - 1 );\r\n\r\n\t\t\treturn function ( v ) {\r\n\r\n\t\t\t\treturn v.copy( direction ).applyQuaternion( camera.quaternion );\r\n\r\n\t\t\t};\r\n\r\n\t\t}();\r\n\r\n\t\tthis.moveForward = function ( distance ) {\r\n\r\n\t\t\t// move forward parallel to the xz-plane\r\n\t\t\t// assumes camera.up is y-up\r\n\r\n\t\t\t_vector.setFromMatrixColumn( camera.matrix, 0 );\r\n\r\n\t\t\t_vector.crossVectors( camera.up, _vector );\r\n\r\n\t\t\tcamera.position.addScaledVector( _vector, distance );\r\n\r\n\t\t};\r\n\r\n\t\tthis.moveRight = function ( distance ) {\r\n\r\n\t\t\t_vector.setFromMatrixColumn( camera.matrix, 0 );\r\n\r\n\t\t\tcamera.position.addScaledVector( _vector, distance );\r\n\r\n\t\t};\r\n\r\n\t\tthis.lock = function () {\r\n\r\n\t\t\tthis.domElement.requestPointerLock();\r\n\r\n\t\t};\r\n\r\n\t\tthis.unlock = function () {\r\n\r\n\t\t\tscope.domElement.ownerDocument.exitPointerLock();\r\n\r\n\t\t};\r\n\r\n\t\tthis.connect();\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport { PointerLockControls };","/* eslint-disable react-hooks/exhaustive-deps */\r\n/* eslint-disable default-case */\r\nimport React, { useEffect, useState } from 'react'\r\nimport * as THREE from '../../node_modules/three/build/three.module'\r\nimport { PointerLockControls } from '../controls/PointerLockControls'\r\n\r\nfunction WalkingZone() {\r\n    const [cameraPosSnapshot, setCameraPosSnapshot] = useState({ furthestX: 0, furthestY: 0, furthestZ: 0, interval: 0 })\r\n\r\n\r\n    let camera, scene, renderer, controls;\r\n    const objects = [];\r\n    let raycaster;\r\n\r\n    let crouchToggle = false;\r\n    let sprintToggle = false;\r\n    let moveForward = false;\r\n    let moveBackward = false;\r\n    let moveLeft = false;\r\n    let moveRight = false;\r\n    let canJump = false;\r\n\r\n    let prevTime = performance.now();\r\n    const velocity = new THREE.Vector3();\r\n    const direction = new THREE.Vector3();\r\n    // const vertex = new THREE.Vector3();\r\n    const color = new THREE.Color();\r\n\r\n    const addNewItems = (interval) => {\r\n        let furthestX = 0\r\n        let furthestY = 0\r\n        let furthestZ = 0\r\n\r\n        // floor\r\n        let floorGeometry = new THREE.PlaneGeometry( 2000, 2000, 100, 100 );\r\n\r\n        // vertex displacement\r\n        let position = floorGeometry.attributes.position;\r\n        floorGeometry = floorGeometry.toNonIndexed(); // ensure each face has unique vertices\r\n        position = floorGeometry.attributes.position;\r\n\r\n        // objects\r\n        const boxGeometry = new THREE.BoxGeometry( 20, 20, 20 ).toNonIndexed();\r\n\r\n        position = boxGeometry.attributes.position;\r\n        const colorsBox = [];\r\n\r\n        for ( let i = 0, l = position.count; i < l; i ++ ) {\r\n            color.setHSL( Math.random() * 0.3 + 0.5, 0.75, Math.random() * 0.25 + 0.75 );\r\n            colorsBox.push( color.r, color.g, color.b );\r\n        }\r\n\r\n        boxGeometry.setAttribute( 'color', new THREE.Float32BufferAttribute( colorsBox, 3 ) );\r\n\r\n        const boxMaterial = new THREE.MeshPhongMaterial( { specular: 0xffffff, flatShading: true, vertexColors: true } );\r\n        \r\n        for ( let i = 0; i < 500; i ++ ) {\r\n            boxMaterial.color.setHSL( Math.random() * 0.2 + 0.5, 0.75, Math.random() * 0.25 + 0.75 );\r\n    \r\n            const box = new THREE.Mesh( boxGeometry, boxMaterial );\r\n            \r\n            box.position.x = Math.floor( Math.random() * 20 - 10 ) * 20 + camera.position.x; // x pos is -10 - 10 + (current position) so it's always within this range of values away from current pos\r\n            box.position.y = Math.floor( Math.random() * 20 ) * 20 + 10 + camera.position.y; // y pos is 10 - 4000 + (current position)\r\n            box.position.z = Math.floor( Math.random() * 20 - 10 ) * 20 + camera.position.z; // z pos is -10 - 10 + (current position)\r\n              \r\n            if (Math.abs(furthestX) < Math.abs(box.position.x) ) furthestX = box.position.x\r\n            if (Math.abs(furthestY) < Math.abs(box.position.y) ) furthestY = box.position.y\r\n            if (Math.abs(furthestZ) < Math.abs(box.position.z) ) furthestZ = box.position.z\r\n\r\n            box.position.interval = interval + 1\r\n\r\n            scene.add( box );\r\n            objects.push( box );\r\n        }  \r\n\r\n        setCameraPosSnapshot({ furthestX, furthestY, furthestZ, interval: interval + 1 })\r\n    }\r\n\r\n    // initial placement of scene + objects\r\n    function init() {\r\n        camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 1000 );\r\n        camera.position.y = 10;\r\n        \r\n        setCameraPosSnapshot({ furthestX: camera.position.x, furthestY: camera.position.y, furthestZ: camera.position.z, interval: 0 })\r\n\r\n        scene = new THREE.Scene();\r\n        scene.background = new THREE.Color( 0xffffff );\r\n        scene.fog = new THREE.Fog( 0xffffff, 0, 100 );\r\n\r\n        const light = new THREE.HemisphereLight( 0xeeeeff, 0x777788, 0.75 );\r\n        light.position.set( 0.5, 1, 0.75 );\r\n        scene.add( light );\r\n\r\n        controls = new PointerLockControls( camera, document.body );\r\n\r\n        const blocker = document.getElementById( 'blocker' );\r\n        const instructions = document.getElementById( 'instructions' );\r\n\r\n        instructions.addEventListener( 'click', function () {\r\n            controls.lock();\r\n        } );\r\n\r\n        controls.addEventListener( 'lock', function () {\r\n            instructions.style.display = 'none';\r\n            blocker.style.display = 'none';\r\n        } );\r\n\r\n        controls.addEventListener( 'unlock', function () {\r\n            blocker.style.display = 'block';\r\n            instructions.style.display = '';\r\n        } );\r\n\r\n        scene.add( controls.getObject() );\r\n\r\n        const onKeyDown = function ( event ) {\r\n            switch ( event.code ) {\r\n                case 'ControlLeft':\r\n                case 'ControlRight':\r\n                    if (!crouchToggle) crouchToggle = true\r\n                    break;\r\n                case 'ShiftLeft':\r\n                case 'ShiftRight':\r\n                    if (!sprintToggle) sprintToggle = true \r\n                    break;\r\n\r\n                case 'ArrowUp':\r\n                case 'KeyW':\r\n                    moveForward = true;\r\n                    break;\r\n\r\n                case 'ArrowLeft':\r\n                case 'KeyA':\r\n                    moveLeft = true;\r\n                    break;\r\n\r\n                case 'ArrowDown':\r\n                case 'KeyS':\r\n                    moveBackward = true;\r\n                    break;\r\n\r\n                case 'ArrowRight':\r\n                case 'KeyD':\r\n                    moveRight = true;\r\n                    break;\r\n\r\n                case 'Space':\r\n                    if ( canJump === true ) velocity.y += 350;\r\n                    canJump = false;\r\n                    break;\r\n            }\r\n        };\r\n\r\n        const onKeyUp = function ( event ) {\r\n            switch ( event.code ) {\r\n                case 'ControlLeft':\r\n                case 'ControlRight':\r\n                    if (crouchToggle) crouchToggle = false \r\n                    break;\r\n                case 'ShiftLeft':\r\n                case 'ShiftRight':\r\n                    if (sprintToggle) sprintToggle = false\r\n                    break;\r\n                case 'ArrowUp':\r\n                case 'KeyW':\r\n                    moveForward = false;\r\n                    break;\r\n\r\n                case 'ArrowLeft':\r\n                case 'KeyA':\r\n                    moveLeft = false;\r\n                    break;\r\n\r\n                case 'ArrowDown':\r\n                case 'KeyS':\r\n                    moveBackward = false;\r\n                    break;\r\n\r\n                case 'ArrowRight':\r\n                case 'KeyD':\r\n                    moveRight = false;\r\n                    break;\r\n            }\r\n        };\r\n\r\n        document.addEventListener( 'keydown', onKeyDown );\r\n        document.addEventListener( 'keyup', onKeyUp );\r\n\r\n        raycaster = new THREE.Raycaster( new THREE.Vector3(), new THREE.Vector3( 0, - 1, 0 ), 0, 10 );\r\n\r\n        renderer = new THREE.WebGLRenderer( { antialias: true } );\r\n        renderer.setPixelRatio( window.devicePixelRatio );\r\n        renderer.setSize( window.innerWidth, window.innerHeight );\r\n        document.body.appendChild( renderer.domElement );\r\n\r\n        addNewItems(0) // adds the initial objects at index 0\r\n\r\n        window.addEventListener( 'resize', onWindowResize );\r\n    }\r\n\r\n    function onWindowResize() {\r\n        camera.aspect = window.innerWidth / window.innerHeight;\r\n        camera.updateProjectionMatrix();\r\n\r\n        renderer.setSize( window.innerWidth, window.innerHeight );\r\n    }\r\n\r\n    // animate function creates an infinite loop to req new animation frames for scene\r\n    function animate() {\r\n\r\n        requestAnimationFrame( animate );\r\n\r\n        const time = performance.now();\r\n\r\n        if ( controls.isLocked === true ) {\r\n\r\n            raycaster.ray.origin.copy( controls.getObject().position );\r\n            raycaster.ray.origin.y -= 10;\r\n\r\n            const intersections = raycaster.intersectObjects( objects );\r\n\r\n            const onObject = intersections.length > 0;\r\n\r\n            const delta = ( time - prevTime ) / 1000;\r\n\r\n            velocity.x -= velocity.x * 10.0 * delta;\r\n            velocity.z -= velocity.z * 10.0 * delta;\r\n\r\n            velocity.y -= 9.8 * 100.0 * delta; // 100.0 = mass\r\n\r\n            direction.z = Number( moveForward ) - Number( moveBackward );\r\n            direction.x = Number( moveRight ) - Number( moveLeft );\r\n            direction.normalize(); // this ensures consistent movements in all directions\r\n\r\n            if ( moveForward || moveBackward ) velocity.z -= direction.z * 400.0 * delta;\r\n            if ( moveLeft || moveRight ) velocity.x -= direction.x * 400.0 * delta;\r\n            if (sprintToggle) {\r\n                velocity.x = velocity.x * (1.2)\r\n                velocity.z = velocity.z * 1.2\r\n            }\r\n            if (crouchToggle) {\r\n                sprintToggle = false\r\n                camera.position.y -= 5\r\n            }\r\n\r\n            if ( onObject === true ) {\r\n                velocity.y = Math.max( 0, velocity.y );\r\n                canJump = true;\r\n            }\r\n\r\n            controls.moveRight( - velocity.x * delta );\r\n            controls.moveForward( - velocity.z * delta );\r\n            \r\n            controls.getObject().position.y += ( velocity.y * delta ); // new behavior\r\n\r\n\r\n            // creates values to see if unit has travelled X units in some direction\r\n            const { furthestX, furthestY, furthestZ, interval } = cameraPosSnapshot\r\n            const { x, y, z } = camera.position\r\n\r\n            console.log({ x, y, z, furthestX, furthestY, furthestZ, interval })\r\n\r\n            const is3UnitsAwayEdgeX =  Math.abs(furthestX) - Math.abs(x) <= 4 // if its within 4 units of edge of x\r\n            const is3UnitsAwayEdgeY =  Math.abs(furthestY) - Math.abs(y) <= 4 // if its within 4 units of edge of y\r\n            const is3UnitsAwayEdgeZ =  Math.abs(furthestZ) - Math.abs(z) <= 4 // if its within 4 units of edge of z\r\n\r\n            const isNearEdge = is3UnitsAwayEdgeX || is3UnitsAwayEdgeY || is3UnitsAwayEdgeZ\r\n            if (isNearEdge) {\r\n                // snapshot creates a new area of blocks + returns a snapshot of the current furthest units spawned\r\n                // addNewItems(interval)\r\n            }\r\n\r\n\r\n            if ( controls.getObject().position.y < 10 ) {\r\n\r\n                velocity.y = 0;\r\n                controls.getObject().position.y = crouchToggle ? 5 : 10;\r\n\r\n                canJump = true;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        prevTime = time;\r\n\r\n        renderer.render( scene, camera );\r\n\r\n    }\r\n\r\n    // first/last render\r\n    useEffect(() => {\r\n        const handleResize = () => {\r\n            console.log('RESIZING', { w: window.innerWidth, h: window.innerHeight })\r\n            camera.aspect = window.innerWidth / window.innerHeight\r\n            camera.updateProjectionMatrix()\r\n            renderer.setSize(window.innerWidth, window.innerHeight)\r\n        }\r\n\r\n        // mounting\r\n        init()\r\n        animate()\r\n        window.addEventListener('resize', handleResize, false)\r\n\r\n        // unmounting\r\n        return () => {\r\n            window.removeEventListener('resize', handleResize, false)\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <div id=\"blocker\">\r\n            <div id=\"instructions\">\r\n                <p className='playText'>\r\n                    Click to play\r\n                </p>\r\n                <p>\r\n                    Move: WASD<br/>\r\n                    Jump: SPACE<br/>\r\n                    Look: MOUSE\r\n                    Sprint: HOLD SHIFT\r\n                    Crouch: HOLD CTRL\r\n                </p>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default WalkingZone\r\n","import React from 'react'\r\nimport './App.css';\r\nimport WalkingZone from './components/walkingZone'\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <WalkingZone/>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\n\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}